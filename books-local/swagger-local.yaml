openapi: 3.0.3
info:
  title: Simple Books API (Local)
  version: 1.0.1
  description: Local Mock Server for Simple Books API
servers:
  - url: http://localhost:5000
    description: Local Mock Server

security:
  - bearerAuth: []

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  
paths:
  /status:
    get:
      tags:
        - Ping - HealthCheck
      summary: Status
      description: Returns the status of the API.
      operationId: status
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: OK
  /api-clients:
    post:
      tags:
        - API Authentication
      summary: API Authentication
      description: Register your API client to get access token (valid for 7 days)
      operationId: apiAuthentication
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                clientEmail:
                  type: string
                  example: test@example.com
                clientName:
                  type: string
                  example: Test User
      responses:
        '201':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  accessToken:
                    type: string
        '409':
          description: Email already registered
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
  /books:
    get:
      tags:
        - Books
      summary: List of books
      description: Returns a list of books with optional filters
      operationId: listOfBooks
      parameters:
        - name: type
          in: query
          schema:
            type: string
            enum: [fiction, non-fiction]
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 20
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    name:
                      type: string
                    type:
                      type: string
                    available:
                      type: boolean
  /books/{bookId}:
    parameters:
      - name: bookId
        in: path
        required: true
        schema:
          type: integer
    get:
      tags:
        - Books
      summary: Get a single book
      description: Retrieve detailed information about a book
      operationId: getASingleBook
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  type:
                    type: string
                  available:
                    type: boolean
                  author:
                    type: string
                  price:
                    type: number
                  current-stock:
                    type: integer
        '404':
          description: Book not found
  /orders:
    get:
      tags:
        - Orders
      summary: Get all orders
      description: View all orders (requires authentication)
      operationId: getAllOrders
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
        '401':
          description: Unauthorized
    post:
      tags:
        - Orders
      summary: Submit an order
      description: Create a new order (requires authentication)
      operationId: submitAnOrder
      security:
        - bearerAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                bookId:
                  type: integer
                customerName:
                  type: string
      responses:
        '201':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  created:
                    type: boolean
                  orderId:
                    type: string
        '401':
          description: Unauthorized
        '404':
          description: Book not in stock
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: This book is not in stock. Try again later.
  /orders/{orderId}:
    parameters:
      - name: orderId
        in: path
        required: true
        schema:
          type: string
    get:
      tags:
        - Orders
      summary: Get an order
      description: View an existing order (requires authentication)
      operationId: getAnOrder
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Success
        '401':
          description: Unauthorized
        '404':
          description: Order not found
    patch:
      tags:
        - Orders
      summary: Update an order
      description: Update an existing order (requires authentication)
      operationId: updateAnOrder
      security:
        - bearerAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                customerName:
                  type: string
      responses:
        '204':
          description: Success
        '401':
          description: Unauthorized
        '404':
          description: Order not found
    delete:
      tags:
        - Orders
      summary: Delete an order
      description: Delete an existing order (requires authentication)
      operationId: deleteAnOrder
      security:
        - bearerAuth: []
      responses:
        '204':
          description: Success
        '401':
          description: Unauthorized
        '404':
          description: Order not found

tags:
  - name: Ping - HealthCheck
  - name: API Authentication
  - name: Books
  - name: Orders
